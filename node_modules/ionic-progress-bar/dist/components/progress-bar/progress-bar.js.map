{"version":3,"file":"progress-bar.js","sourceRoot":"","sources":["../../../src/components/progress-bar/progress-bar.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAqB,iBAAiB,EAAE,MAAM,eAAe,CAAC;AAChF,OAAO,EAAE,SAAS,EAAE,MAAM,EAAE,MAAM,eAAe,CAAC;AAElD,IAAM,aAAa,GAAG,wkBAcrB,CAAC;AAEF,IAAM,SAAS,GAAG,+4DAwFjB,CAAC;;IAeE,oCACW,MAAiB,EACjB,MAAc,EACb,GAAqB;QAFtB,WAAM,GAAN,MAAM,CAAW;QACjB,WAAM,GAAN,MAAM,CAAQ;QACb,QAAG,GAAH,GAAG,CAAkB;uBARR,EAAE;wBACD,CAAC;sBACA,CAAC;uBACA,CAAC;QAOzB,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;QAClB,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QACrC,IAAI,CAAC,MAAM,GAAK,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QACpC,IAAI,CAAC,OAAO,GAAI,MAAM,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAErC,IAAI,CAAC,UAAU,CACX;YACI,OAAO,EAAE,IAAI,CAAC,OAAO;YACrB,YAAY,EAAE,IAAI;SACrB,CACJ,CAAC;KACL;IAED,6CAAQ,GAAR;QAAA,iBAEC;QADG,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,eAAe,EAAE,UAAC,MAAM,IAAK,OAAA,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,EAAvB,CAAuB,CAAC,CAAC;KAC/E;IAED,gDAAW,GAAX;QACI,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,eAAe,CAAC,CAAC;KAC5C;IAEM,+CAAU,GAAjB,UAAkB,MAAW;QAA7B,iBASC;QARG,UAAU,CAAE;YACR,KAAI,CAAC,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC;YAC9B,EAAE,CAAA,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,CAAA,CAAC;gBACrB,KAAI,CAAC,OAAO,EAAE,CAAC;gBACf,KAAI,CAAC,QAAQ,GAAG,CAAC,GAAG,GAAG,KAAI,CAAC,OAAO,CAAC,GAAG,KAAI,CAAC,MAAM,CAAC;aACtD;YACD,KAAI,CAAC,GAAG,CAAC,aAAa,EAAE,CAAC;SAC5B,CAAC,CAAC;KACN;;gBA/CJ,SAAS,SAAC;oBACT,QAAQ,EAAE,cAAc;oBACxB,QAAQ,EAAE,aAAa;oBACvB,MAAM,EAAE,CAAC,SAAS,CAAC;iBACpB;;;;gBAjHQ,SAAS;gBAAE,MAAM;gBADa,iBAAiB;;qCAAxD;;SAmHa,0BAA0B","sourcesContent":["import { Component, OnInit, OnDestroy, ChangeDetectorRef } from '@angular/core';\nimport { NavParams, Events } from 'ionic-angular';\n\nconst HTML_TEMPLATE = `\n<ion-content class=\"main-view\">\n    <div class=\"overlay\" (click)=\"dismiss()\"></div>\n    <ion-scroll class=\"modal_content\" scrollY=\"false\">\n\n        <div class=\"message\" text-nowrap>\n            <ion-spinner></ion-spinner><span [innerHTML]=\"message\"></span></div>\n        <div class=\"progress-outer\">\n            <div class=\"progress-inner\" [ngStyle]=\"{'opacity': progress > 0 ? 1 : 0}\"  [style.width]=\"progress.toString() + '%'\">\n                {{progress | number: '1.0-0'}}%\n            </div>\n        </div>\n    </ion-scroll>\n</ion-content>\n`;\n\nconst CSS_STYLE = `\n\n    .main-view{\n      background: transparent;\n    }\n    .overlay {\n      position: fixed;\n      top: 0;\n      width: 100%;\n      height: 100%;\n      z-index: 1;\n      opacity: .5;\n      background-color: #333;\n    }\n    .modal_content {\n      position: absolute;\n      padding-top: 10px;\n      top: calc(50% - (20%/2));\n      left: 0;\n      right: 0;\n      width: 90%;\n      height: 80px;\n      padding: 10px;\n      z-index: 100;\n      margin: 0 auto;\n      color: #333;\n      background: #e8e8e8;\n      background: -moz-linear-gradient(top, #fff 0%, #e8e8e8 100%);\n      background: -webkit-linear-gradient(top, #fff 0%, #e8e8e8 100%);\n      background: linear-gradient(to bottom, #fff 0%, #e8e8e8 100%);\n      border-radius: 5px;\n      box-shadow: 0 2px 3px rgba(51, 51, 51, .35);\n      box-sizing: border-box;\n      -moz-box-sizing: border-box;\n      -webkit-box-sizing: border-box;\n      overflow: hidden;\n    }\n\n    .message{\n        width: 100%;\n        padding: 10px 16px 0px 16px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n    }\n    \n    .message > ion-spinner{\n        height: 20px;\n        width: 20px;\n        margin-right: 16px;\n        vertical-align: middle;\n        *{\n            stroke: color($colors, primary);\n        }\n    }\n\n    .theroot {\n        height: 100px;\n        background-color: yellow;\n    }\n\n\n    .progress-outer {\n        margin: 10px 15px;\n        padding: 3px;\n        text-align: center;\n        background-color: #f4f4f4;\n        border: 1px solid #dcdcdc;\n        color: #fff;\n        border-radius: 20px;\n    }\n\n    .progress-inner {\n        min-width: 0%;\n        white-space: nowrap;\n        overflow: hidden;\n        padding: 2px;\n        border-radius: 10px;\n        background-color: #4286f4;\n    }\n\n\n.modal-wrapper{\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n}\n\n`;\n\n\n@Component({\n  selector: 'progress-bar',\n  template: HTML_TEMPLATE,\n  styles: [CSS_STYLE]\n})\nexport class SimpleProgressBarComponent implements OnInit, OnDestroy {\n\n    public message: string = \"\";\n    public progress: number = 0;\n    protected _total: number = 0;\n    protected _actual: number = 0;\n\n    constructor(\n        public params: NavParams,\n        public events: Events,\n        private ref:ChangeDetectorRef\n    ) {\n        this.progress = 0;\n        this.message = params.get('message');\n        this._total   = params.get('total');\n        this._actual  = params.get('actual');\n\n        this._milestone(\n            {\n                message: this.message,\n                only_message: true\n            }\n        );\n    }\n\n    ngOnInit(){\n        this.events.subscribe('milestone:add', (params) => this._milestone(params));\n    }\n\n    ngOnDestroy(){\n        this.events.unsubscribe('milestone:add');\n    }\n\n    public _milestone(params: any){\n        setTimeout( () => {\n            this.message = params.message;\n            if(!params.only_message){\n                this._actual++;\n                this.progress = (100 * this._actual) / this._total;\n            }\n            this.ref.detectChanges();\n        });\n    }\n\n}\n"]}